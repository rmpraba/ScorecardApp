

<link rel="import" href="..\..\bower_components/polymer/polymer.html">
<link rel="import" href="..\..\bower_components/paper-input/paper-input.html">
<link rel="import" href="../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../../bower_components/paper-dropdown-menu/paper-dropdown-menu.html">
<link rel="import" href="../../bower_components/iron-icons/maps-icons.html">
<link rel="import" href="../../bower_components/paper-dropdown-menu-light/paper-dropdown-menu-light.html">


<dom-module id="category-card">
  <template>
    <style>
      :host
      {
         margin-left: 10%;
        display: block;
         @apply(--layout-center);
        /*width: 40%;*/
      }
      .card          
      {
         @apply(--layout-center);
        width: 70%;
        margin-left: 8%;
      }
      .title
      {
        @apply(--layout-center);
        width: 70%;
        margin-left: 29%; 
      }
      .cnbutton paper-button
      {
      background-color: #363636;
      color: #ffffff;
      width: 10%;
      margin-left: 40%;
      margin-top: 3%;
      }

      .buttons paper-button
      {
        @apply(--layout-center);
      background-color: #363636;
      color: #ffffff;
      width: 10%;
      margin-top: 6%;
      }
      .category
      {
        margin-top: 4%;
        margin-left:30%;
        width: 50%;
      } 

      #categorydialog
      {
        width: 40%;
        margin: 0 auto;
        box-shadow: 0px 0px 14px -1px rgba(0,0,0,0.75);
      }
      .popup-btn
      {
        margin: 0 auto;
      }
      .iron-close
      {
        position: absolute;
        top: 20px;
        right: 20px;
      } 
      
    </style>
     
     <div class="title"> 
    <h3>MASTER CATEGORY CREATION</h3>
    </div> 

    <div class="cnbutton">
    <paper-button on-click="Fncreate">Create </paper-button>
    </div>

    <div class="category">
    <template is="dom-repeat" items="{{catarr}}" as="ca">
    <category-display-card  categoryname="{{ca.category_name}}" categoryid="{{ca.category_id}}"  categorytype="{{ca.category_type}}" hidecategoryinput="true" hidecategoryitem="false">  </category-display-card>
    </div>
    </template>

    <div hidden>{{temphidden}}</div>

    <paper-dialog id="categorydialog" modal>
    <div class="card">
    <iron-icon dialog-dismiss class="iron-close" icon="icons:close"></iron-icon>
    <paper-input readonly  hidden value="{{categorytype}}" label="Categorytype"></paper-input>
    <paper-input value="{{categoryname}}" label="Category Name"></paper-input>
    </div>

    <div class="buttons">
    <paper-button  class="popup-btn" on-click="FnSubmit">Submit </paper-button>
    
    </div>
    </paper-dialog>
    <master-ui-service id="uiservice"></master-ui-service>
    </template>
    <script>
    (function() {
    'use strict';
       
    Polymer({
      is: 'category-card',

      ready:function()
      {
       //alert("test");   
       this.$.uiservice.FnFetchCategorySeq();
       this.$.uiservice.FnFetchCategoryname();
       this.$.hidenewcategorycard=true;
      },
      FnRefresh:function()
      {
         this.categoryname=""; 
      },
 
      FnSubmit:function()
      {
        if(this.categoryname==null || this.categoryname=="")
        {          
          alert("Please enter categoryname before submit");
        }
        else
        {
        //alert("test");
        var categoryid=(this.categoryname).toLowerCase();
        //alert(this.categoryname);
        this.$.uiservice.FnSetCategoryInfo(this.categorytype,this.categoryname,categoryid);
       //  this.$.uiservice.FnFetchCategorySeq();
         document.querySelector('category-card').FnRefresh(); 
         this.$.categorydialog.toggle();                       
        }
      },
      
      Fncreate:function()
      {
           this.$.uiservice.FnFetchCategorySeq();
            this.$.categorydialog.open();   
      }
      
    });
  })();
  </script>
</dom-module>
