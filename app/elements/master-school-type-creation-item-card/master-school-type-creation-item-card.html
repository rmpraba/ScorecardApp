
<link rel="import" href="..\..\bower_components/polymer/polymer.html">

<dom-module id="master-school-type-creation-item-card">
  <template>
    <style>
      :host 
      {
        display: block;
      }
      .card
      {
        @apply(--layout-horizontal);
           border-bottom: 1px solid #dedede;
      }
      .innercard{

      @apply(--layout-vertical);
         
    
      }
    </style>

    <table class="card" id="card{{schoolid}}"> 
      <tr><td hidden>{{schoolid}}</td>  
      <td width=20"%" hidden$="{{hidesubjectitem}}">{{schooltypename}}</td>
      <td width="5%" hidden$="{{hidesubjectitem}}"><paper-button  on-click='FnEdit'>GradeSelection</paper-button></td>
      <td width="5%"><paper-icon-button icon='close' on-click='FnDelete'></paper-icon-button></td>
     </table>

    <div class="innercard">
      <paper-dialog id="schooldialogwww" modal style="width:60%">
         <h2> SELECT THE GRADES</h2>
         <template is="dom-repeat" items="{{fngradearr}}" as="view">
           <school-grade-mapping--item-card gradeidzzzw="{{view.grade_id}}" gradenamezzzw="{{view.grade_name}}" style="display:inline-block;"></school-grade-mapping--item-card>
        </template></br>
         <paper-button on-click='FnSave'>Submit</paper-button>
              <paper-button on-click="create" dialog-confirm autofocus >X</paper-button>
      </paper-dialog>
  </div>  
    <iron-ajax   
        id="FnschoolgettheGradeajax"
        url="{{FnschoolgettheGradeurl}}"
        params="{{FnschoolgettheGradeparam}}"
        handle-as="json"
        content-type="application/json"
        method="post"
        on-response="FnschoolgettheGradeResponse"
        debounce-duration="300">
    </iron-ajax>   
  <master-ui-service id="subservice"></master-ui-service>
  </template>
  <script>
  (function() 
  {
    'use strict';
     var getarr=[];
    Polymer({
      is: 'master-school-type-creation-item-card',
    /*  ready:function()
      {
        //alert("test");   
        this.hidesubjectitem=false;
      },
    */ 
      FnDelete:function()
      {
        this.$.subservice.fnDeleteSchooltypename(this.schooltypename);
      },
      FnEdit:function()
      { 
        this.FnschoolgettheGradeurl=sessionStorage.getItem("addrinfo")+"/FnschoolgettheGrade-service";
        this.$.FnschoolgettheGradeajax.generateRequest();
        this.hidesubjectitem=false;
        this.$.schooldialogwww.open();
      },
   FnschoolgettheGradeResponse:function(e){
        var res=e.detail.response.returnval;
        this.fngradearr=res;
        alert(JSON.stringify(this.fngradearr));
       },
   fnsetpassgrade:function(arr){
           getarr=arr;},
        create:function(e){
           document.querySelector('school-grade-mapping--item-card').fnsetclean();},
      FnSave:function(){
          alert(JSON.stringify(getarr));
          alert(this.schoolid+this.schooltypename);
        this.$.subservice.Fngradeinsetschool(this.schoolid,getarr,this.schooltypename);
        this.hidesubjectitem=false;
        },
         
    });
  })();
  </script>
</dom-module>
