
<link rel="import" href="..\..\bower_components/polymer/polymer.html">
<link rel="import" href="..\..\bower_components/paper-input/paper-input.html">

<dom-module id="role-card">
  <template>
    <style>
      :host{
         margin-left: 10%;
         display: block;
         @apply(--layout-left);
        /*width: 50%;*/
      }
      }
      .rolecard
      {
         @apply(--layout-center);
        width: 6%;
        margin-left: 10%;
      } 
      .title
      {
        @apply(--layout-center);
        width: 30%;
        margin-left: 35%; 
      }
      .rbutton paper-button
      {
      background-color: #363636;
      color: #ffffff;
      width: 10%;
      margin-left: 40%;
      margin-top: 5%;
      }
      .button paper-button
      {
      background-color: #363636;
      color: #ffffff;                
      width: 10%;
      margin-left: 40%;
      margin-top: 4%;
      }
      .role
      {
        margin-top:3%;
        width: 50%;
      }  
    </style>

     <div class="title"> 
    <h3> MASTER ROLE  CREATION</h3>
    </div>
    
    <div class="rbutton">
    <paper-button on-click="Fncreate">Create</paper-button>
    </div>

    <div class="role">
    <template is="dom-repeat" items="{{rolearr}}" as="r">
    <role-display-card  rolename="{{r.role_name}}" roleid="{{r.id}}" hiderolenameinput="true" hiderolenameitem="false">
    </role-display-card>
    </div>
    </template>

    <paper-dialog id="roledialog" modal>
    <div class="card">
    
    <paper-input value="{{rolename}}" label="Role  Name"></paper-input>
    </div>

    <div class="buttons">
    <paper-button autofocus on-click="FnSubmit">Submit </paper-button>
    <paper-button  dialog-confirm autofocus>Close </paper-button>
    </div>
    </paper-dialog>

    <master-ui-service id="uiservice"></master-ui-service>

  </template>
  <script>
  (function() {
    'use strict';
    Polymer({
      is: 'role-card',
      ready:function()
      {
        //alert("test");
        this.$.uiservice.FnFetchRole();
        this.$.hidenewrolecard=true;
      },  
      FnRefresh:function()
      {
       this.rolename="";        
      },  
      
      FnSubmit:function()
      {                      
         if(this.rolename==null||this.rolename=="")
         {
          alert('Please enter rolename before save!!');
         }
         else 
         {
          //alert("test");
         var roleid = (this.rolename).toLowerCase();         
         this.$.uiservice.FnSetRoleInfo(this.rolename,roleid);
         document.querySelector('role-card').FnRefresh(); 
       }    
      },    
      
      Fncreate:function()
      {
         this.$.roledialog.open();
     }
    });
  })();
  </script>
</dom-module>
