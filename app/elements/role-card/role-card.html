

<link rel="import" href="..\..\bower_components/polymer/polymer.html">
<link rel="import" href="..\..\bower_components/paper-input/paper-input.html">
<link rel="import" href="../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../../bower_components/paper-dropdown-menu/paper-dropdown-menu.html">
<link rel="import" href="../../bower_components/iron-icons/maps-icons.html">
<link rel="import" href="../../bower_components/paper-dropdown-menu-light/paper-dropdown-menu-light.html">


<dom-module id="role-card">
  <template>
    <style>
      :host{
         margin-left: 10%;
         display: block;
         @apply(--layout-left);
        /*width: 50%;*/
      }
      }

      .rolecard
      {
         @apply(--layout-center);
        width: 6%;
        margin-left: 10%;
      }

      .title
      {
        @apply(--layout-center);
        width: 110%;
        margin-left: 33%; 
      }

      .rbutton paper-button
      {
      background-color: #363636;
      color: #ffffff;
      width: 10%;
      margin-left: 40%;
      margin-top: 3%;
      }

      .buttons paper-button
      {
        @apply(--layout-center);
      background-color: #363636;
      color: #ffffff;                
      width: 10%;
      margin-top: 4%;
      }

      .role
      {
        margin-top:3%;
        margin-left:30%;
        width: 50%;
      }  

       #roledialog
      {
        width: 40%;
        margin: 0 auto;
        box-shadow: 0px 0px 14px -1px rgba(0,0,0,0.75);
      }

      .popup-but
      {
        margin: 0 auto;
      }

      .iron-close
      {
        position: absolute;
        top: 20px;
        right: 20px;
      }


    </style>

     <div class="title"> 
    <h3> MASTER ROLE  CREATION</h3>
    </div>
    
    <div class="rbutton">
    <paper-button on-click="Fncreate">Create</paper-button>
    </div>

    <div class="role">
    <template is="dom-repeat" items="{{rolearr}}" as="r">
    <role-display-card  rolename="{{r.role_name}}" roleid="{{r.id}}" hiderolenameinput="true" hiderolenameitem="false">
    </role-display-card>
    </div>
    </template>

    <paper-dialog id="roledialog" modal>

    <div class="card">
    <iron-icon dialog-dismiss class="iron-close" icon="icons:close"></iron-icon>
    
    <paper-input value="{{rolename}}" label="Role  Name"></paper-input>
    </div>

    <div class="buttons">
    <paper-button class="popup-but"  on-click="FnSubmit">Submit </paper-button>
    </div>
    </paper-dialog>

    <master-ui-service id="uiservice"></master-ui-service>

  </template>
  <script>
  (function() {
    'use strict';
    Polymer({
      is: 'role-card',
      ready:function()
      {
        //alert("test");
        this.$.uiservice.FnFetchRole();
        this.$.hidenewrolecard=true;
      },  
      FnRefresh:function()
      {
       this.rolename="";        
      },  
      
      FnSubmit:function()
      {                      
         if(this.rolename==null||this.rolename=="")
         {
          alert('Please enter rolename before save!!');
         }
         else 
         {
          //alert("test");
         var roleid = (this.rolename).toLowerCase(); 
         //alert("hi"); 
               
         //alert("hi2");
         //alert(roleid);
         this.$.uiservice.FnSetRoleInfo(this.rolename,roleid);
         document.querySelector('role-card').FnRefresh(); 
         this.$.roledialog.toggle();

       }    
      },    
      
      Fncreate:function()
      {
         this.$.roledialog.open();
     }
     
    });
  })();
  </script>
</dom-module>
