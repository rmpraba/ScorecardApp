<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<link rel="import" href="..\..\bower_components/polymer/polymer.html">

<dom-module id="school-creation-item-card">
  <template>
    <style>
      :host {
        display: block;
      }
      .card{
        @apply(--layout-horizontal);
        border-bottom: 1px solid #dedede;
      }

    </style>       
    <div> 
    <table class="card" id="card{{schoolid}}">
      <tr><td hidden>{{schoolid}}</td>
      <td width="40%" hidden$="{{hiderolenameitem}}">{{schoolname}}</td>
      <td width="40%" hidden$="{{hiderolenameinput}}">
          <paper-input label="school id" hidden value="{{schoolid}}"></paper-input>
          <paper-input label="school name" value="{{schoolname}}"></paper-input>
          <paper-input label="Affiliationno" value="{{affiliationno}}"></paper-input>
          <paper-input  label="mobilno" value="{{mobile}}"></paper-input>
          <paper-input label="Telephone number" value="{{telno}}"></paper-input>
          <paper-input label="Mail Id" value="{{mailid}}"></paper-input>
          <paper-input label="website" value="{{wesite}}"></paper-input>
          <paper-input label="Village/Town" value="{{address}}"></paper-input>
          <paper-input label="District" value="{{address1}}"></paper-input>
          <paper-input label="State" value="{{address2}}"></paper-input>
          <paper-input  label="Pincode" value="{{address3}}"></paper-input></br>
          <div class="card">
          <paper-checkbox id="fnedtpre" on-change="FnSetedtPre">pre-primary</paper-checkbox>
          <paper-checkbox id="fnedtPrimary" on-change="FnSetedtprmary">primary</paper-checkbox>
          <paper-checkbox id="fnedtsecondry" on-change="FnSetedtsecondry">secondry</paper-checkbox>
          <paper-checkbox id="fnedthigh" on-change="FnSetedthigh">High-secodary</paper-checkbox>    
         </div></br>

       
        <paper-dialog id="fnedtpre" modal>
               <center>
                  <h4 style="color:#2874A6" >SELECT THE GRADE</h4>
              <template is="dom-repeat" items="{{grapreprimearr}}" as="view">
             <school-grade-mapping-card graschoolid="{{schoolid}}" gragradeid={{view.grade_id}} gragradename="{{view.grade_name}}" graschooltyp="{{view.school_type}}">
              </school-grade-mapping-card></br> 
                 </template>
                        <paper-button dialog-confirm autofocus>Tap me to close</paper-button>
                </center>        
                </paper-dialog>

           <paper-dialog id="fnedtPrimary" modal >
                <center><h4 style="color:#2874A6" >SELECT THE GRADE</h4>
               <template is="dom-repeat" items="{{graPrimaryarr}}" as="view">
               <school-grade-mapping-card graschoolid="{{schoolid}}"  gragradeid={{view.grade_id}} gragradename="{{view.grade_name}}" graschooltyp="{{view.school_type}}">
                </school-grade-mapping-card></br> 
              </template>
                 <paper-button dialog-confirm autofocus>Tap me to close</paper-button>
                 </center>
          </paper-dialog>
           <paper-dialog id="fnedtsecondry" modal>
                 <center><h4 style="color:#2874A6" >SELECT THE GRADE</h4>
                    <template is="dom-repeat" items="{{grasecondarr}}" as="view">
                     <school-grade-mapping-card graschoolid="{{schoolid}}" gragradeid={{view.grade_id}} gragradename="{{view.grade_name}}" graschooltyp="{{view.school_type}}">
                        </school-grade-mapping-card></br>
                     </template>
                        <paper-button dialog-confirm autofocus>Tap me to close</paper-button>
                       
              </center>        
          </paper-dialog>
           <paper-dialog id="fnedthigh" modal>
                 <center><h4 style="color:#2874A6" >SELECT THE GRADE</h4>
             <template is="dom-repeat" items="{{grahighsecondarr}}" as="view">
                 <school-grade-mapping-card graschoolid="{{schoolid}}" gragradeid={{view.grade_id}} gragradename="{{view.grade_name}}" graschooltyp="{{view.school_type}}">
                </school-grade-mapping-card></br> 
          </template>
                   <div >               
                        <paper-button dialog-confirm autofocus>Tap me to close</paper-button>
                   </div>
             </center>
         </paper-dialog>
 


     </td> 
      <td width="5%" hidden$="{{hiderolenameitem}}"><paper-icon-button icon='create' on-click='FnEdit'></paper-icon-button>
      </td>
      <td width="5%" hidden$="{{hiderolenameinput}}"><paper-icon-button icon='save' on-click='FnSave'></paper-icon-button>
      </td>
      <td width="5%"><paper-icon-button icon='close' on-click='FnDelete'></paper-icon-button></td>
    </table>
      <div>
        
      </div>
    <master-ui-service id="uiservice"></master-ui-service></div>
  </template>
  <script>
  (function() {
    'use strict';
       var getinsertarr=[];
    Polymer({
      is: 'school-creation-item-card',

       ready:function(){
        // alert('coming!');
        this.hiderolenameinput=true;
        this.hiderolenameitem=false;
      },
      FnDelete:function(){
        this.$.uiservice.Fndeleteinfo(this.schoolid);
       },
      FnEdit:function(){
        this.hiderolenameinput=false;
        this.hiderolenameitem=true;
        this.$.uiservice.schooltypecheck(this.schoolid);
    
      },
      Fnschoolinsetgrade:function(arr){
              getinsertarr=arr;     
      },
      FnSave:function(){
        this.$.uiservice.Fnsaveschoolinfo(this.schoolname,this.schoolid,this.telno,this.mobile,this.mailid,this.wesite,this.address,this.address1,this.address2,this.address3,this.affiliationno);
        this.$.uiservice.Fnschoolinsetgrademap(getinsertarr);
        this.hiderolenameinput=true;
        this.hiderolenameitem=false;
      },
      setgradearrr1:function(arr){

        var getbigarr=[];
           getbigarr=arr;
           alert(JSON.stringify(getbigarr));
              alert('1');
            for(var i=0;i<getbigarr.length;i++){

                      var getbigid=getbigarr[i].school_type;
                      alert(getbigid)
                      if(getbigid=='Primary'){
                          alert('1');
                        document.querySelector("#fnedtPrimary").checked=true;
                      }
                     else if(getbigid=='Pre-primary'){
                        alert('2');
                      document.querySelector("#fnedtpre").checked=true;
                     }
                      else if(getbigid=='Secondry'){
                          alert('3');
                        document.querySelector("#fnedtsecondry").checked=true;
                      }
                      else if(getbigid=='High-Secondry'){
                          alert('4');
                        document.querySelector("#fnedthigh").checked=true;
                      }
              
             }
          
      },
      FnSetedtprmary:function(e){
        if(document.querySelector("#fnedtPrimary").checked==true){
           this.$.fnedtPrimary.open();
     
        }
      },
      FnSetedtPre:function(e){
          if(document.querySelector("#fnedtpre").checked==true){
         this.$.fnedtpre.open();

        }
      },
      FnSetedtsecondry:function(e){
         if(document.querySelector("#fnedtsecondry").checked==true){
        this.$.fnedtsecondry.open();
      }
      },
      FnSetedthigh:function(e){
             if(document.querySelector("#fnedthigh").checked==true){
          this.$.fnedthigh.open();
        }
      },
      setColor:function(roleid){
        document.getElementById('card'+schoolname).backgroundColor = "yellow";
      }
    });
  })();
  </script>
</dom-module>
