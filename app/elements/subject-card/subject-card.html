

<link rel="import" href="..\..\bower_components/polymer/polymer.html">
<link rel="import" href="..\..\bower_components/paper-input/paper-input.html">
<link rel="import" href="../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../../bower_components/paper-dropdown-menu/paper-dropdown-menu.html">
<link rel="import" href="../../bower_components/paper-dropdown-menu-light/paper-dropdown-menu-light.html">

<dom-module id="subject-card">
  <template>
    <style>
      :host
      {
         margin-left: 10%;
        display: block;
         @apply(--layout-center);
        /*width: 40%;*/
      }
      .card
      {
         @apply(--layout-center);
        width: 60%;
        margin-left: 8%;
      }
      .title
      {
        @apply(--layout-center);
        width: 30%;
        margin-left: 35%; 
      }
      .sbbutton paper-button
      {
      background-color: #363636;
      color: #ffffff;
      width: 10%;
      margin-left: 40%;
      margin-top: 5%;
      }

      .button paper-button
      {
      background-color: #363636;
      color: #ffffff;
      width: 10%;
      margin-left: 40%;
      margin-top: 6%;
      }
      .subject
      {
        margin-top: 4%;
        width: 50%;
      }

    </style>
    <div class="title"> 
    <h3>MASTER SUBJECT CREATION</h3>
    </div>
    <div class="sbbutton">
    <paper-button on-click="Fncreate">Create </paper-button>
    </div>

    <div class="subject">
    <template is="dom-repeat" items="{{subarr}}" as="sb">
    <subject-display-card subjectid="{{sb.subject_id}}" subjectname="{{sb.subject_name}}" subjectcategory="{{sb.subject_category}}" hidesubjectinput="true" hidesubjectitem="false"></subject-display-card>
    </div>
    </template>

    <paper-dialog id="subjectdialog" modal>
    <div class="card">
    <paper-input readonly value="{{subjectid}}" label="Subject ID"></paper-input>
    <paper-input value="{{subjectname}}" label="Subject Name"></paper-input>
    
     <paper-dropdown-menu id="subjectcategory" label="Select Category" disabled="{{read}}" required style="width:100%;">
            <paper-menu id="category" class="dropdown-content"  on-iron-select="FnSelectcategory"  attr-for-selected="value" required>  

      <template is="dom-repeat" items="{{categoryarr}}" as="view">
      <paper-item value="{{view.category_id}}">{{view.category_name}}</paper-item>                          
      </template>
            </paper-menu>
          </paper-dropdown-menu> 
    </div>
    <div class="buttons">
    <paper-button autofocus on-click="FnSubmit">Submit </paper-button>
    <paper-button  dialog-confirm autofocus>Close </paper-button>
    </div>
    </paper-dialog>

    <master-ui-service id="uiservice"></master-ui-service>
     
     
  </template>
  <script>
  (function() {
    'use strict';
     var category;
    Polymer
    ({
      is: 'subject-card',
      ready:function()
      {
       // alert("hi");
        this.$.uiservice.category1();   
        this.$.uiservice.FnFetchSubjectSeq();
        this.$.uiservice.FnFetchSubjectname();
        this.$.hidenewssubjectcard=true;     
      },
      
      FnRefresh:function()
      {
       document.querySelector('#category').selected=-1;
       this.subjectname="";
       //this.subjectid="";                  
      }, 

      fetchmastercategorynameResponse:function(e)
      {
        var arr=e.detail.response.returnval;
        //alert(JSON.stringify(arr));     
      },

       FnSubmit:function()
      {
        if(this.subjectname==null || this.subjectname=="")
        {
          alert("please enter Subjectname before Submit");
        }
        else
        {
      
         this.$.uiservice.FnSetSubjectInfo(this.subjectid,this.subjectname,category);
         document.querySelector('subject-card').FnRefresh();
        }
       
      },
      
      FnSelectcategory:function(e)
      {
        category = e.target.selectedItem.textContent.trim();
        
      },

       Fncreate:function()
      {
          this.$.subjectdialog.open();   
      }  

    });
  })();  
  </script>
</dom-module>
